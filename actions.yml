name: 'NuGet Publisher'
description: 'Builds and publishes a .NET library to NuGet.org.'
author: 'Your Name'

inputs:
  nuget_api_key:
    description: 'API key for NuGet.org'
    required: true
  nuget_source:
    description: 'NuGet source URL (default: https://api.nuget.org/v3/index.json)'
    required: false
    default: 'https://api.nuget.org/v3/index.json'
  repo_url:
    description: 'URL of the GitHub repository to clone'
    required: true

runs:
  using: 'docker'
  image: 'mcr.microsoft.com/dotnet/sdk:8.0'  # Reference to .NET SDK image or your custom Docker image
  args:
    - '/github/workspace'  # Path to the workspace containing the user's repo
    - ${{ inputs.nuget_api_key }}  # API key for NuGet
    - ${{ inputs.nuget_source }}  # NuGet source URL (optional)
    - ${{ inputs.repo_url }}  # Repository URL to clone

env:
  INPUT_NUGET_API_KEY: ${{ inputs.nuget_api_key }}  # Set the API key as environment variable
  INPUT_NUGET_SOURCE: ${{ inputs.nuget_source }}  # Set the NuGet source as environment variable
